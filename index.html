<!DOCTYPE html>
<html>
  <head>
    <title>Hipster Map of Melbourne</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="refresh" content="120" />
    <link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" />
    <style>
      html, body, #map {
        height: 100%;
        padding: 0;
        margin: 0;
      }
      p {
        font-family: 'Lobster', cursive; 
        font-size: 20px; 
        margin: 1em 2em;
        line-height:30px !important;
      }
      h1 { font-family: LimeLight; }
    </style>
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />
    <!--[if lte IE 8]>
      <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.ie.css" />
    <![endif]-->
    <link rel="stylesheet" href="css/light-theme.css">
    <link rel="stylesheet" href="css/makeitresponsive.css">
    <link href="http://fonts.googleapis.com/css?family=Niconne|Limelight|Lobster|Quicksand:400,700" rel="stylesheet" type="text/css">

  </head>
  <body>
    <div id="map"></div>
    <div class="sidepanel">
      <div class="wrapper">
        <div class="context subheader">
          <p>Map created by <a href="http://www.meetup.com/Datahack-Melbourne/events/168328902/">OKFN #datahack</a></p>
        </div>
        <h1>Hipster map of Melbourne</h1>
        <p>Hutong dumplings carlton, MSAC empire of the sun swanston the city loop dandenong, melb ball food bloggers pellegrini's the melbourne cup, moomba the bulldogs bourke st mall chaddie fed square, street art werribee wildlife ticket inspector.

      Four seasons in one day brunswick and brunswick st, trams ticket inspector cumulus inc MSAC melbourne cricket ground, collins place old melbourne gaol carlton dandenong avalon is so not melb, world's most liveable city spencer st station richmond tigers chapel street hook turns, the rebels the croft institute Rod Laver.

      Secret laneway bars vic market, cumulus inc melbourne cricket ground richmond tigers rooftop cinema black is alway in fashion, citylink formula one grand prix lions bar fairy penguins street art, avalon is so not melb prahran hipsters moomba spencer st station melbourne central, graffiti north of the river the corner hotel.
  </p>
  <small>Melbourne Ipsum text by <a href="http://www.melbourneipsum.com.au/">melbourneipsum.com.au</a>.</small>
      </div>
    </div>
    
    <!-- include cartodb.js library -->
    <script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>

    <script>
      function main() {
        var map = new L.Map('map', {
          zoomControl: false,
          center: [-37.8072, 144.9728],
          minZoom: 13,
          maxZoom: 17,
          zoom: 14
        });
        var ts=Math.round(new Date().getTime()/1000.0);
        L.tileLayer('http://hipstermelbourne.org/tile/InnerNorth/{z}/{x}/{y}.png?metatile=4&updated=' + ts, {
          attribution: 'Hipsters + OpenStreetMap'
        }).addTo(map);

        cartodb.createLayer(map, 'http://stevage.cartodb.com/api/v2/viz/5bd91834-a98b-11e3-a8d1-0e10bcd91c2b/viz.json')
         .addTo(map)
         .on('done', function(layer) {

          layer.setInteraction(true);

          layer.on('featureOver', function(e, pos, latlng, data) {
            cartodb.log.log(e, pos, latlng, data);
          });

          layer.on('error', function(err) {
            cartodb.log.log('error: ' + err);
          });
        }).on('error', function() {
          cartodb.log.log("some error occurred");
        });
      }

      // you could use $(window).load(main);
      window.onload = main;
    </script>
  </body>
</html>
